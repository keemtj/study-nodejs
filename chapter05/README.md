<details>
<summary>목차</summary>

- 📗 Chapter05. 패키지 매니저 [🔗](#-chapter05-패키지-매니저)
  - 📖 5.1 npm 알아보기 [🔗](#-npm-알아보기)
  - 📖 5.2 package.json으로 패키지 관리하기 [🔗](#-패키지-관리하기)
  - 📖 5.3 패키지 버전 이해하기 [🔗](#-패키지-버전-이해하기)
  - 📖 5.4 기타 npm 명령어 [🔗](#-기타-npm-명령어)
  - 📖 5.5 패키지 배포하기 [🔗](#-패키지-배포하기)

</details>

## 📗 Chapter05 패키지 매니저

### 📖 5.1 npm 알아보기

- npm은 노드 패키지 매니저이다.
- 대부분의 자바스크립트 프로그램은 패키지라는 이름으로 npm에 등록되어 있기 때문에 특정 기능을 하는 패키지가 필요하다면 npm에서 찾아 설치하면 된다.
- npm에 업로드된 노드 모듈을 패키지라고 부른다.

> **yarn**  
> npm의 대체자로 yarn이 있다. yarn은 페이스북이 내놓은 패키지 매니저이다. 리액트나 리액트 네이티브 같은 페이스북 진영의 프레임워크를 사용할 때 종종 볼 수 있으며, npm의 사용 방법을 안다면 yarn도 쉽게 익힐 수 있다. npm과 비교해서 몇 가지 편리한 기능이 들어 있지만, 별도로 설치해야 한다. npm 서버가 너무 느릴 경우 yarn으로 패키지를 대신 설치할 수도 있다.

### 📖 5.2 패키지 관리하기

- 서비스에 필요한 패키지를 추가하다보면 패키지 개수도 많아지고 저마다 고유한 버전이 있으므로 어딘가에 기록해두어야 한다.
- 같은 패키지라도 버전별로 기능이 다를 수 있으므로, 프로젝틀르 설치할 때 패키지도 동일한 버전을 설치하지 않으면 문제가 생길 수 있다.
- 설치한 패키지의 버전을 관리하는 파일이 `package.json`이다.
- **따라서 노드 프로젝트를 시작하기 전에는 폴더 내부에 무조건 package.json부터 만들고 시작해야 한다.**

```shell
$ npm init
```

> - **package name:** 패키지의 이름이다. name 속성에 저장된다.
> - **version:** 패키지의 버전이다.
> - **entry point:** 자바스크립트 실행 파일 진입점이다. main 속성에 저장된다.
> - **test command:** 코드를 테스트할 때 입력할 명령어를 의미한다. scripts 속성 안의 test 속성에 저장된다.
> - **git repository:** 코드를 저장해둔 깃 저장소 주소를 의미한다.
> - **keywords:** 키워드는 npm 공식 홈페이지에서 패키지를 쉽게 찾을 수 있도록 해준다.
> - **license:** 해당 패키지의 라이선스를 넣으면 된다.

> **라이선스**  
> 오픈 소스라고 해서 모든 패키지를 아무런 제약 없이 사용할 수 있는 것은 아니다. 라이선스별로 제한 사항이 있으므로 설치 전에 반드시 라이선스를 확인해야 한다.

```json
{
  "name": "npmtest",
  "version": "0.0.1",
  "description": "hello package.json",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "author": "keem",
  "license": "ISC"
}
```

- scripts 속성에 명령어 여러 개를 등록해두고 사용할 수 있다. 보통 start 명령어에 `node [파일명]`을 저장해두고 npm start로 실행한다. start나 test 같은 스크립트는 run을 붙이지 않아도 실행된다.

```shell
# Express 설치하기
$ npm install express
```

> **audited [숫자] packages**  
> 패키지를 설치할 때 `audited [숫자] packages`라는 문장이 출력된다. 패키지에 있을 수 있는 취약점을 자동으로 검사했다는 의미이다. `npm audit fix` 명령어를 입력하면 npm이 스스로 수정할 수 있는 취약점을 알아서 수정한다.

```json
{
  "name": "npmtest",
  ...
  "license": "ISC",
  "dependencies": {
    "express": "^4.17.1",
  }
}
```

- express의 설치가 완료되면 package.json에 `dependencies` 속성안에 express 이름과 함께 버전이 저장되어 있다.

> **--save 옵션**  
> 패키지를 설치할 때 npm install 명령어에 --save 옵션을 붙이는 책이나 블로그를 많이 볼 수 있다. dependencies에 패키지 이름을 추가하는 옵션이지만 npm@5부터는 기본값으로 설정되어 있으므로 따로 붙이지 않아도 된다.

- 추가적으로 node_modules라는 폴더도 생성된다. 그 안에 설치한 패키지들이 들어있다.
- express 하나만 설치했으나 express가 의존하는 패키지들도 함께 설치된다.
- 패키지 하나가 다른 여러 패키지에 의존하고, 그 패키지들은 또 다른 패키지들에 의존한다. 이렇게 의존 관계가 복잡하게 얽혀 있어 package.json이 필요하다.
- package-lock.json 파일도 생성된다. 내용을 직접 보면 express 외에도 node_modules에 들어 있는 패키지들의 정확한 버전과 의존 관계가 담겨 있다. npm으로 패키지를 설치, 수정, 삭제할 때마다 패키지들 간의 내부 의존 관계를 이 파일에 저장한다.

> **--save-dev 옵션**  
> 실제 배포 시에는 사용되지 않고 개발 중에만 사용되는 패키지를 설치할 때 `--save-dev` 옵션을 추가하여 설치한다. `npm install --save-dev [패키지]`로 설치한다. package.json의 `devDependencies` 속성에 개발용 패키지들만 따로 관리하게 된다.

> **--global 옵션**  
> 전역 설치라는 옵션도 있다. 전역 설치한 패키지는 콘솔의 명령어로 사용할 수 있다. 전역 설치한 패키지는 package.json에 기록되지 않는다.

> **npx**  
> 전역 설치를 기피하는 개발자들도 있다. 전역 설치한 패키지는 package.json에 기록되지 않아 다시 설치할 때 어려움이 따르기 때문이다. 이러한 경우를 위한 명령어로 npx가 있다. package.json의 devDependencies 속성에 기록한 후, 앞에 npx 명령어를 붙여 실행하면 전역 설치한 것과 같은 효과(명령어로 사용 가능)를 얻을 수 있다. 패키지가 package.json에 기록되었으므로 버전 관리도 용이하다.

> **npm에 등록되지 않은 패키지**  
> 모든 패키지가 npm에 등록되는 것은 아니다. 오픈 소스가 아니거나 개발 중이므로 깃허브, nexus 등의 저장소에 보관되어 있을 수 있다. `npm install [저장소 주소]` 명령어를 통해 설치할 수 있다.

> **명령어 줄여쓰기**
>
> - **npm install:** npm i
> - **--save-dev:** -D
> - **--global:** -g

### 📖 5.4 기타 npm 명령어

### 📖 5.5 패키지 배포하기
