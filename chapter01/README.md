<details>
<summary>목차</summary>

- 📗 Chapter01. 노드 시작하기 [🔗](#-chapter01-노드-시작하기)
  - 📖 1.1 핵심 개념 이해하기 [🔗](#-핵심-개념-이해하기)
    - 🔖 1.1.1 서버 [🔗](#-서버)
    - 🔖 1.1.2 자바스크립트 런타임 [🔗](#-자바스크립트-런타임)
    - 🔖 1.1.3 이벤트 기반 [🔗](#-이벤트-기반)
    - 🔖 1.1.4 논 블로킹 I/O [🔗](#-논-블로킹)
    - 🔖 1.1.5 싱글 스레드 [🔗](#-싱글-스레드)
  - 📖 1.2 서버로서의 노드 [🔗](#-서버로서의-노드)
  - 📖 1.3 서버 외의 노드 [🔗](#-서버-외의-노드)
  - 📖 1.4 개발 환경 설정하기 [🔗](#-개발-환경-설정하기)

</details>

## 📗 Chapter01 노드 시작하기

### 📖 핵심 개념 이해하기

- Node.js는 Chrome V8 Javascript 엔진으로 빌드된 Javascript 런타임이다.
- 노드는 서버와 자바스크립트 프로그램을 실행하는 런타임으로서 사용한다

#### 🔖 서버

- 서버는 네트워크를 통해 클라이언트에 정보나 서비스를 제공하는 컴퓨터 또는 프로그램을 말한다.
- 클라이언트란 요청을 보내는 주체로 브라우저, 데스크톱 프로그램, 모바일 앱, 다른 서버에 요청하는 서버일 수도 있다.
- 주소창에 웹사이트 주소를 입력(**요청**)하면 브라우저는 그 주소에 해당하는 컴퓨터 위치를 파악하고 웹 사이트 페이지를 받아와서 요청자의 브라우저(클라이언트)에 띄운다(**응답**)
- 웹이나 앱을 사용할 때 유저의 데이터와 서비스의 데이터가 생성된다. 이 데이터를 어딘가에 저장하고, 그 어딘가에서 클라이언트로 데이터를 받아와야 한다. 이곳이 서버이다.
- 응답으로 항상 Yes를 해야 하는 것은 아니다. No를 할 수도 있다.

#### 🔖 자바스크립트 런타임

- 브라우저는 자바스크립트 런타임을 내장하고 있기 때문에 자바스크립트 코드를 실행할 수 있다.
- 구글이 V8 엔진을 사용하여 크롬을 출시하고 라이언 달은 V8 엔진 기반의 노드 프로젝트를 시작했다.
- 노드는 V8 그리고 libuv라는 라이브러리를 사용한다. libuv 라이브러리는 **노드의 특성인 이벤트 기반, 논 블로킹 I/O 모델을 구현**하고 있다.

#### 🔖 이벤트 기반

- 이벤트 기반(event-driven)이란 이벤트가 발생할 때 미리 지정해둔 작업을 수행하는 방식을 의미한다. 이벤트로는 클릭이나 네트워크 요청 등이 있을 수 있다.
- 이벤트 기반 시스템에서는 특정 이벤트가 발생할 때 무엇을 할지 미리 등록해두어야 한다. 이를 이벤트 리스너(event listener)에 콜백(callback) 함수를 등록한다고 표현한다.
- 발생한 이벤트가 없거나 발생했던 이벤트를 다 처리하면, 노드는 다음 이벤트가 발생할 때까지 대기한다.

> **호출 스택**  
> 노드는 자바스크립트 코드의 맨 위부터 한 줄씩 실행한다. 함수 호출 부분을 발견했다면 호출한 함수를 호출 스택에 넣는다. 호출된 순서와 반대로 실행이 완료된다. 실행이 완료되면 호출 스택에서 지워진다.
>
> **이벤트 루프**  
> 이벤트 발생 시 호출할 콜백 함수들을 관리하고, 호출된 콜백 함수의 실행 순서를 결정하는 역할을 담당한다. 노드가 종료될 때까지 이벤트 처리를 위한 작ㅇ벙르 반복하므로 루프(loop)라고 부른다.
>
> **백그라운드**  
> setTimeout 같은 타이머나 이벤트 리스너들이 대기하는 곳이다. 자바스크립트가 아닌 다른 언어로 작성된 프로그램이라고 봐도 된다. 여러 작업이 동시에 실행될 수 있다.
>
> **태스크 큐**  
> 이벤트 발생 후, 백그라운드에서는 태스크 큐로 타이머나 이벤트 리스너의 콜백 함수를 보낸다. 정해진 순서대로 콜백들이 줄을 서 있으므로 콜백 큐라고도 부른다. 콜백들은 보통 완료된 순서대로 줄을 서 있지만 특정한 경우 순서가 바뀌기도 한다.
>
> 1. 함수가 호출 되고 컨텍스트가 생성됨
> 2. setTimeout 함수가 호출 스택에 쌓임
> 3. setTimeout 실행 시 콜백을 백그라운드로 보냄
> 4. 백그라운드에서 타미머 실행 후 콜백을 태스크 큐로 보냄
> 5. 호출 스택 실행이 끝나 비워지면(anonymous함수까지 종료)
> 6. 이벤트 루프가 태스크 큐의 콜백을 호출 스택으로 올림
> 7. 콜백이 호출 스택에서 실행되고 비워짐
> 8. 이벤트 루프는 태스크 큐에 콜백이 들어올 때까지 대기

#### 🔖 논 블로킹

- 작업에는 두가지 종류가 있다. 동시에 실행될 수 있는 작업과 동시에 실행될 수 없는 작업이다.
- 자바스크립트 코드는 동시에 실행될 수 없다. 하지만 자바스크립트상에서 돌아가는 것이 아닌 I/O 작업 같은 것은 동시에 처리될 수 있다.
- I/O는 입력(Input)/출력(Output)을 의미한다.
- 파일 시스템 접근(파일 읽기, 파일 쓰기, 폴더 만들기 등), 네트워크를 통한 요청 같은 작업이 I/O의 일종이다.

> **논 블로킹**  
> 이전 작업이 완료될 때까지 대기하지 않고 다음 작업을 수행함을 뜻한다.
>
> **블로킹**  
> 이전 작업이 끝나야만 다음 작업을 수행하는 것을 의미한다.

- 논 블로킹 방식이 같은 작업을 더 짧은 시간에 처리할 수 있다.
- 노드는 I/O 작업을 백그라운드로 넘겨 동시에 처리하곤 한다. 따라서 동시에 처리될 수 있는 작업들은 최대한 묶어서 백그라운드로 넘겨야 시간을 절약할 수 있다.

> **동기와 비동기, 블로킹과 논 블로킹**  
> 동기와 비동기, 블로킹과 논 블로킹이라는 4개의 용어가 노드에서 혼용되고 있으며, 의미도 서로 다르다.
>
> - **동기와 비동기:** 백그라운드 작업 완료 확인 여부
> - **블로킹과 논 블로킹:** 함수가 바로 return되는지 여부

#### 🔖 싱글 스레드

- 싱글 스레드란 스레드가 하나뿐이라는 것을 의미한다. 자바스크립트 코드가 동시에 실행될 수 없는 이유이기도 하다.

> **프로세스**  
> 프로세스는 운영체제에서 할당하는 작업의 단위이다. 노드나 웹 브라우저 같은 프로그램은 개별적인 프로세스이다. 프로세스 간에는 메모리 등의 자원을 공유하지 않는다.
>
> **스레드**  
> 스레드는 프로세스 내에서 실행되는 흐름의 단위이다. 프로세스는 스레드를 여러 개 생성하여 여러 작업을 동시에 처리할 수 있다. 스레드들은 부모 프로세스의 자원을 공유한다. 같은 주소의 메모리에 접근 가능하므로 데이터를 공유할 수 있다.
>
> **노드와 싱글스레드**  
> 노드는 엄밀히 말하면 싱글 스레드로 동작하지 않는다.
>
> 1. 노드를 실행하면 먼저 프로세스가 하나 생성된다.
> 2. 내부적으로 스레드를 여러 개 생성한다.
> 3. 직접 제어할 수 있는 스레드는 하나뿐이다.
> 4. 그래서 노드를 싱글 스레드라고 여겨진다.
>
> **스레드풀과 워커 스레드**  
> 노드가 싱글 스레드로 동작하지 않는 두 가지 경우가 있다. 스레드풀(Thread pool)과 워커 스레드(Worker Thread)이다.
>
> **스레드풀**은 노드가 특정 동작을 수행할 때 스스로 멀티 스레드를 사용한다. 예를 들어 암호화, 파일 입출력, 압축 등이 있다.
>
> **워커 스레드**는 노드 12 버전에서 안정화된 기능으로 이제 노드에서도 멀티 스레드를 사용할 수 있게 되었다. 직접 다수의 스레드를 다룰 수 있다. CPU 작업(연산)이 많은 경우 워커 스레드를 사용하면 된다.
>
> **멀티 스레딩과 멀티 프로세싱 비교**  
> 멀티 스레딩 | 멀티 프로세싱
> :---|:---
> 하나의 프로세스 안에서 여러 개의 스레드 사용 | 여러 개의 프로세스 사용
> CPU 작업이 많을 때 사용 | I/O 요청이 많을 때 사용
> 프로그래밍이 어려움\* | 프로그래밍이 비교적 쉬움\*

### 📖 서버로서의 노드

- 노드는 기본적으로 싱글 스레드, 논 블로킹 모델을 사용한다.
- 서버는 기본적으로 I/O 요청이 많이 발생한다. I/O 처리를 잘하는 노드를 서버로 사용하면 좋다.

> **노드의 장단점**
>
> | 장점                                          | 단점                                              |
> | :-------------------------------------------- | :------------------------------------------------ |
> | 멀티 스레드 방식에 비해 적은 컴퓨터 자원 사용 | 기본적으로 싱글 스레드라서 CPU 코어를 하나만 사용 |
> | I/O 작업이 많은 서버로 적합                   | CPU 작업이 많은 서버로는 부적합                   |
> | 멀티 스레드 방식보다 쉬움                     | 하나뿐인 스레드가 멈추지 않도록 관리가 필요함     |
> | 웹 서버가 내장되어 있음                       | 서버 규모가 커졌을 때 서버를 관리하기 어려움      |
> | 자바스크립트를 사용함                         | 어중간한 성능                                     |
> | JSON 형식과 쉽게 호환됨                       | -                                                 |

### 📖 서버 외의 노드

- 사용 범위가 점점 늘어나면서 웹, 모바일, 데스크톱 애플리케이션 개발에도 사용된다.
- 대표적으로 Angular, React, Vue, Electron, React Native, ionic 등 노드 기반의 개발 도구가 있다.

### 📖 개발 환경 설정하기

**맥 환경**

- 노드 공식 사이트에 접속하여 Current 버전(^14.0.0)을 설치한다.
- 설치가 완료되면 터미널에서 `node`와 `npm` 버전을 확인한다.

```shell
$ node -v
v14.18.0

$ npm -v
v6.14.15
```

> **Homebrew로 노드 설치하기**  
> 다음 명령어를 입력하여 홈브류를 설치한다.
>
> ```shell
> $ /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)"
> # 홈브류 설치가 완료되면 아래의 명령어로 node 설치
> $ brew install node
> ```

- `npm`의 최신 버전을 사용하고 싶거나, 현재 버전이 너무 낮다면 다음 명령어를 입력하여 업데이트한다.

```shell
$ npm install -g npm
# 또는
$ sudo npm install -g npm
> Password:
# 설치가 완료되면 버전 확인
$ npm -v
```
